version: 1

providers:
  - node

phases:
  setup:
    nixPkgs:
      - nodejs_18
      - chromium
      - puppeteer
      - libnss3
      - libatk1.0-0
      - libatk-bridge2.0-0
      - libx11-xcb1
      - libxcomposite1
      - libxdamage1
      - libxrandr2
      - libgbm1
      - libasound2
      - libpangocairo-1.0-0
      - libpango-1.0-0
      - libcairo2
      - libgdk-pixbuf2.0-0
  install:
    cmds:
      - npm install
      - PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true npm install puppeteer
  build:
    cmds:
      - echo "âœ… WhatsApp Bot ready for Railway"